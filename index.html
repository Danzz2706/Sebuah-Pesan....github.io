<script>
  const baseMessage = `Halo {name},\n\nDi sini aku cuma pengen kamu tahu sesuatu....\n\nAku suka sama kamu.\n\nMungkin kamu harusnya udah ngga kaget sihh karena aku udah cerita ke salah satu temen kamu hehe. Tapi perasaan ini udah ada sejak awal kita masuk ke Telkom. Sejak saat itu, sebenernya aku udah pengen kenalan, ngobrol, atau sekadar menyapa lebih dulu. Tapi kamu tahu sendiri, dulu aku masih punya seseorang, dan rasanya nggak pantas buat mulai apa-apa.\n\nWaktu aku tahu kamu udah punya pacar duluan, aku sempat mikir,\n"Owalaa... mungkin belum waktunya."\n\nAku ingat banget waktu ngobrolin makrab. Teman-temanmu sempat bahas soal siapa yang bakal boncengin kamu kalau misalnya sistemnya cowok-cewek. Terus ada yang nyeletuk,\n"Aman lah, udah putus ini katanya."\n\nDi situ hatiku sempat deg-degan.\n"Apakah ini waktunya?"\n\nTapi aku juga tahu, baru putus itu pasti ada perasaan yang belum selesai — entah rasa sedih, kecewa, atau bahkan harapan untuk kembali. Aku pun pernah di posisi itu.\n\nTapi sekarang, aku bukan lagi orang yang sekadar tertarik.\nAku suka sama kamu.\n\nSuka karena caramu membawa diri. Karena kepribadianmu yang bisa nyesuaiin diri sama siapa pun, dan tetap jadi diri sendiri.\n\nAwalnya aku tahu kamu dari cerita orang-orang. Katanya kamu pintar, nilai Kalkulus bagus.\nSedangkan aku? Ya… wassalam deh, hahaha.\n\nAku nggak minta jawaban sekarang. Bukan itu tujuanku.\nAku cuma pengen kamu tahu aja, biar aku juga lega akhirnya bisa ngomongin ini.\n\nTapi satu hal yang aku minta…\n\nJangan jadi canggung ya, sama aku.`;

  // Music and interaction variables
  let isPlaying = false;
  let musicProgress = 0;
  let musicInterval;
  let selectedReaction = null;

  // Memory data
  const memories = {
    1: {
      title: "Hari Pertama Kuliah",
      description: "Masih ingat nggak waktu pertama kali masuk kelas? Kamu duduk di depan, aku di belakang, tapi sudah penasaran sama kamu dari hari itu. 📚✨"
    },
    2: {
      title: "Diskusi Sambil Makan",
      description: "yaa makan sate malem malem sambil mikirin transportasi"
    },
    3: {
      title: "Makrab yang Seru",
      description: "Event makrab itu jadi momen spesial buatku. Lihat kamu ketawa sama teman-teman, rasanya pengen ikut jadi bagian dari kebahagiaanmu. 🎭🌟"
    }
  };

  // Create floating particles
  function createParticles() {
    const particles = document.querySelector('.particles');
    for (let i = 0; i < 20; i++) {
      const particle = document.createElement('div');
      particle.classList.add('particle');
      particle.style.left = Math.random() * 100 + '%';
      particle.style.top = Math.random() * 100 + '%';
      particle.style.width = Math.random() * 6 + 2 + 'px';
      particle.style.height = particle.style.width;
      particle.style.animationDelay = Math.random() * 6 + 's';
      particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
      particles.appendChild(particle);
    }
  }

  // Create floating hearts
  function createFloatingHearts() {
    const container = document.getElementById('floatingElements');
    const hearts = ['💕', '💖', '💗', '💙', '💜', '🤍', '❤️'];
    
    setInterval(() => {
      const heart = document.createElement('div');
      heart.classList.add('floating-heart');
      heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
      heart.style.left = Math.random() * 100 + '%';
      heart.style.animationDelay = Math.random() * 2 + 's';
      container.appendChild(heart);
      
      // Remove heart after animation
      setTimeout(() => {
        heart.remove();
      }, 3000);
    }, 800);
  }

  function encrypt(text) {
    return btoa(unescape(encodeURIComponent(text)));
  }

  function decrypt(text) {
    return decodeURIComponent(escape(atob(text)));
  }

  function generateEncryptedConfess() {
    const name = document.getElementById("name").value.trim();
    const button = document.querySelector('.send-button');
    const buttonText = document.getElementById('buttonText');
    
    if (!name) {
      // Add shake animation to input
      const input = document.getElementById('name');
      input.style.animation = 'shake 0.5s ease-in-out';
      setTimeout(() => input.style.animation = '', 500);
      
      // Show error message
      const errorMsg = document.createElement('div');
      errorMsg.textContent = 'Masukkan nama dulu dong 😊';
      errorMsg.style.color = '#ff6b6b';
      errorMsg.style.fontSize = '0.9rem';
      errorMsg.style.marginTop = '0.5rem';
      errorMsg.style.animation = 'fadeIn 0.3s ease-out';
      
      const inputGroup = document.querySelector('.input-group');
      inputGroup.appendChild(errorMsg);
      
      setTimeout(() => {
        errorMsg.remove();
      }, 3000);
      
      return;
    }

    // Loading animation
    buttonText.innerHTML = '<span class="typing-indicator">Mengirim</span>';
    
    setTimeout(() => {
      const personalized = baseMessage.replaceAll("{name}", name);
      const encrypted = encrypt(personalized);
      
      // Hide form section with animation
      const formSection = document.getElementById("formSection");
      formSection.classList.add('fade-out');
      
      setTimeout(() => {
        // Show results
        document.getElementById("encryptedText").textContent = encrypted;
        document.getElementById("result").style.display = "block";
        document.getElementById("decryptSection").style.display = "block";
        document.getElementById("decryptField").focus();
      }, 600);
      
    }, 1500);
  }

  function handleDecrypt(event) {
    if (event.key === "Enter") {
      const encryptedText = document.getElementById("encryptedText").textContent;
      const decrypted = decrypt(encryptedText);
      
      // Hide decrypt section
      document.getElementById("decryptSection").style.display = "none";
      
      // Show message with typing effect
      const messageDisplay = document.getElementById("messageDisplay");
      messageDisplay.style.display = "block";
      
      // Typing effect
      let i = 0;
      const typingSpeed = 30;
      function typeMessage() {
        if (i < decrypted.length) {
          messageDisplay.textContent = decrypted.substring(0, i + 1);
          i++;
          setTimeout(typeMessage, typingSpeed);
        } else {
          // Show image after typing is complete
          setTimeout(() => {
            document.getElementById("confessImage").style.display = "block";
            
            // Show reaction section after image
            setTimeout(() => {
              document.getElementById("reactionSection").style.display = "block";
            }, 1500);
          }, 800);
        }
      }
      
      typeMessage();
    }
  }

  // Reaction functions
  function selectReaction(emoji, feeling) {
    // Remove previous selection
    document.querySelectorAll('.reaction-btn').forEach(btn => {
      btn.classList.remove('selected');
    });
    
    // Add selection to clicked button
    event.target.classList.add('selected');
    selectedReaction = { emoji, feeling };
    
    // Show result
    const resultDiv = document.getElementById('reactionResult');
    const responses = {
      'Senang': 'Senang banget lihat kamu tersenyum! 😊✨',
      'Terkejut': 'Hehe, maaf ya kalau bikin kaget. Tapi ini dari hati loh! 😳💕',
      'Terharu': 'Aww, kamu terharu? Aku juga terharu bisa berbagi ini sama kamu 🥰💖',
      'Malu': 'Kamu malu? Lucu banget! Aku juga malu sih sebenernya 😅💗',
      'Bingung': 'Bingung ya? Gapapa, take your time. Yang penting kamu tahu perasaanku 🤔💙'
    };
    
    resultDiv.textContent = responses[feeling];
    
    // Show memory section after reaction
    setTimeout(() => {
      document.getElementById("memorySection").style.display = "block";
    }, 2000);
  }

  // Memory functions
  function showMemory(memoryId) {
    const memory = memories[memoryId];
    
    // Create modal-like overlay
    const overlay = document.createElement('div');
    overlay.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease-out;
    `;
    
    const modal = document.createElement('div');
    modal.style.cssText = `
      background: white;
      padding: 2rem;
      border-radius: 1.5rem;
      max-width: 400px;
      width: 90%;
      text-align: center;
      animation: slideUp 0.4s ease-out;
    `;
    
    modal.innerHTML = `
      <h3 style="color: #667eea; font-family: 'Dancing Script', cursive; font-size: 1.8rem; margin-bottom: 1rem;">
        ${memory.title}
      </h3>
      <p style="line-height: 1.6; color: #666; margin-bottom: 2rem;">
        ${memory.description}
      </p>
      <button onclick="this.parentElement.parentElement.remove()" style="
        padding: 0.8rem 2rem;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 2rem;
        cursor: pointer;
        font-weight: 600;
      ">
        Tutup 💕
      </button>
    `;
    
    overlay.appendChild(modal);
    document.body.appendChild(overlay);
  }

  // Music functions
    function toggleMusic() {
    const playBtn = document.getElementById('playBtn');
    const progressBar = document.getElementById('progressBar');
    const music = document.getElementById('music'); // ambil elemen audio

    if (!isPlaying) {
      isPlaying = true;
      playBtn.textContent = '⏸️';

      music.play().catch(err => {
        console.warn("Gagal play musik:", err);
      });

      musicInterval = setInterval(() => {
        // update progress bar berdasarkan waktu
        const progress = (music.currentTime / music.duration) * 100;
        progressBar.style.width = progress + '%';
      }, 200);

      // tetap tampilkan final section setelah 3 detik
      setTimeout(() => {
        document.getElementById("finalSection").style.display = "block";
        createFloatingHearts();
      }, 3000);

    } else {
      isPlaying = false;
      playBtn.textContent = '▶️';

      music.pause();
      clearInterval(musicInterval);
    }
  }

  // Final section functions
  function createNewMessage() {
    if (confirm('Yakin mau buat pesan baru? Data sebelumnya akan hilang.')) {
      location.reload();
    }
  }

  function saveMemory() {
    // Create a beautiful summary
    const summary = `
🌟 KENANGAN SPESIAL 🌟

Pesan: "${baseMessage.substring(0, 100)}..."
Reaksi: ${selectedReaction ? selectedReaction.emoji + ' ' + selectedReaction.feeling : 'Belum ada reaksi'}
Waktu: ${new Date().toLocaleDateString('id-ID', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    })}

💕 Terima kasih sudah membaca pesan ini 💕
    `;
    
    // Create download link
    const blob = new Blob([summary], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'kenangan_spesial.txt';
    a.click();
    URL.revokeObjectURL(url);
    
    // Show success message
    showNotification('💾 Kenangan berhasil disimpan!');
  }

  function shareFeeling() {
    const shareText = `Aku baru saja mendapat pesan yang sangat menyentuh hati 💕\n\nCek aplikasi "Kata Tanpa Suara" untuk berbagi perasaanmu juga! ✨`;
    
    if (navigator.share) {
      navigator.share({
        title: 'Kata Tanpa Suara',
        text: shareText,
      });
    } else {
      // Fallback: copy to clipboard
      navigator.clipboard.writeText(shareText).then(() => {
        showNotification('💌 Teks berhasil disalin ke clipboard!');
      });
    }
  }

  function showNotification(message) {
    const notification = document.createElement('div');
    notification.style.cssText = `
      position: fixed;
      top: 2rem;
      right: 2rem;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 1rem 2rem;
      border-radius: 2rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      animation: slideInRight 0.5s ease-out;
      font-weight: 600;
    `;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideOutRight 0.5s ease-out';
      setTimeout(() => notification.remove(), 500);
    }, 3000);
  }

  // Add shake animation CSS
  const additionalCSS = `
    @keyframes shake {
      0%, 20%, 40%, 60%, 80%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
    }
    
    @keyframes slideInRight {
      0% { transform: translateX(100%); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes slideOutRight {
      0% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(100%); opacity: 0; }
    }
  `;
  const style = document.createElement('style');
  style.textContent = additionalCSS;
  document.head.appendChild(style);

  // Initialize particles on load
  window.addEventListener('load', createParticles);

  // Add enter key support for name input
  document.getElementById('name').addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
      generateEncryptedConfess();
    }
  });

  // Add some easter eggs
  let clickCount = 0;
  document.addEventListener('click', function() {
    clickCount++;
    if (clickCount === 50) {
      showNotification('🎉 Wow! Kamu sudah klik 50 kali! Semangat banget ya! 😄');
    }
  });

  // Add konami code easter egg
  let konamiCode = [];
  const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight'];
  
  document.addEventListener('keydown', function(e) {
    konamiCode.push(e.code);
    if (konamiCode.length > konamiSequence.length) {
      konamiCode.shift();
    }
    
    if (konamiCode.join(',') === konamiSequence.join(',')) {
      // Secret animation
      document.body.style.animation = 'rainbow 2s ease-in-out';
      showNotification('🌈 Secret code activated! You found the rainbow! ✨');
      
      // Add rainbow animation
      const rainbowCSS = `
        @keyframes rainbow {
          0% { filter: hue-rotate(0deg); }
          100% { filter: hue-rotate(360deg); }
        }
      `;
      const rainbowStyle = document.createElement('style');
      rainbowStyle.textContent = rainbowCSS;
      document.head.appendChild(rainbowStyle);
      
      setTimeout(() => {
        document.body.style.animation = '';
      }, 2000);
      
      konamiCode = [];
    }
  });

  // Add random compliments that appear occasionally
  const compliments = [
    "✨ Kamu pasti orang yang baik hati!",
    "🌟 Senyummu pasti indah banget!",
    "💫 Kamu punya aura positif!",
    "🌈 Hari ini pasti hari yang baik buatmu!",
    "💖 Kamu pantas mendapat kebahagiaan!"
  ];

  setTimeout(() => {
    if (Math.random() < 0.3) { // 30% chance
      const randomCompliment = compliments[Math.floor(Math.random() * compliments.length)];
      showNotification(randomCompliment);
    }
  }, 10000); // After 10 seconds

  // Add time-based greetings
  function getTimeBasedGreeting() {
    const hour = new Date().getHours();
    if (hour < 12) return "Selamat pagi! ☀️";
    if (hour < 15) return "Selamat siang! 🌤️";
    if (hour < 18) return "Selamat sore! 🌅";
    return "Selamat malam! 🌙";
  }

  // Update subtitle with time-based greeting
  setTimeout(() => {
    const subtitle = document.querySelector('.subtitle');
    subtitle.textContent = getTimeBasedGreeting() + " " + subtitle.textContent;
  }, 2000);
</script><!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Confess - Kata Tanpa Suara</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
<style>
  * {
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
  }

  body {
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #333;
    min-height: 100vh;
    overflow-x: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }

  /* Animated background particles */
  .particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
  }

  .particle {
    position: absolute;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    animation: float 6s ease-in-out infinite;
  }

  .particle:nth-child(odd) {
    animation-delay: -2s;
  }

  .particle:nth-child(even) {
    animation-delay: -4s;
  }

  /* Dynamic background shapes */
  .bg-shape {
    position: absolute;
    border-radius: 50%;
    background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
    animation: morphShape 8s ease-in-out infinite;
  }

  .bg-shape-1 {
    top: 10%;
    left: 80%;
    width: 200px;
    height: 200px;
    animation-delay: 0s;
  }

  .bg-shape-2 {
    bottom: 20%;
    left: 10%;
    width: 150px;
    height: 150px;
    animation-delay: -3s;
  }

  .bg-shape-3 {
    top: 60%;
    right: 15%;
    width: 100px;
    height: 100px;
    animation-delay: -6s;
  }

  .container {
    max-width: 650px;
    width: 90%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    padding: 3rem 2.5rem;
    border-radius: 2rem;
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.15), 0 10px 30px rgba(0, 0, 0, 0.1);
    animation: containerEntry 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    z-index: 10;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .header {
    text-align: center;
    margin-bottom: 2rem;
    position: relative;
  }

  .main-title {
    font-family: 'Dancing Script', cursive;
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
    animation: titleGlow 2s ease-in-out infinite alternate;
  }

  .subtitle {
    font-size: 0.9rem;
    color: #666;
    margin-top: 0.5rem;
    font-weight: 300;
  }

  .floating-hearts {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.5rem;
    animation: floatingHearts 3s ease-in-out infinite;
  }

  .form-section {
    transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .form-section.fade-out {
    opacity: 0;
    transform: translateY(-30px);
    pointer-events: none;
  }

  .input-group {
    margin-bottom: 1.5rem;
    position: relative;
  }

  .input-label {
    display: block;
    font-weight: 500;
    color: #555;
    margin-bottom: 0.8rem;
    font-size: 1rem;
  }

  .name-input {
    width: 100%;
    padding: 1.2rem 1.5rem;
    border: 2px solid rgba(102, 126, 234, 0.2);
    border-radius: 1rem;
    font-size: 1rem;
    background: rgba(255, 255, 255, 0.8);
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    backdrop-filter: blur(10px);
  }

  .name-input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25), 0 8px 25px rgba(102, 126, 234, 0.15);
    transform: translateY(-2px);
  }

  .send-button {
    width: 100%;
    padding: 1.3rem;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 1rem;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
    overflow: hidden;
  }

  .send-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s;
  }

  .send-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
  }

  .send-button:hover::before {
    left: 100%;
  }

  .send-button:active {
    transform: translateY(-1px);
  }

  .result-section {
    background: linear-gradient(135deg, #f8f9ff, #f0f4ff);
    padding: 2rem;
    margin-top: 2rem;
    border-radius: 1.5rem;
    border: 2px solid rgba(102, 126, 234, 0.1);
    animation: resultEntry 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
  }

  .result-section::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(102, 126, 234, 0.05), transparent);
    animation: shimmer 3s linear infinite;
  }

  .result-content {
    position: relative;
    z-index: 2;
  }

  .result-title {
    font-weight: 600;
    color: #667eea;
    margin-bottom: 1rem;
    font-size: 1.1rem;
  }

  .encrypted-text {
    background: rgba(255, 255, 255, 0.8);
    padding: 1.5rem;
    border-radius: 1rem;
    font-family: 'Monaco', 'Menlo', monospace;
    font-size: 0.9rem;
    word-break: break-all;
    border: 1px solid rgba(102, 126, 234, 0.2);
    max-height: 150px;
    overflow-y: auto;
  }

  .decrypt-section {
    margin-top: 2rem;
    text-align: center;
    animation: decryptEntry 0.6s ease-out;
  }

  .decrypt-instruction {
    color: #666;
    margin-bottom: 1rem;
    font-style: italic;
  }

  .decrypt-input {
    width: 100%;
    padding: 1.2rem;
    border: 2px dashed rgba(102, 126, 234, 0.4);
    border-radius: 1rem;
    text-align: center;
    background: rgba(255, 255, 255, 0.6);
    transition: all 0.3s ease;
  }

  .decrypt-input:focus {
    outline: none;
    border-style: solid;
    border-color: #667eea;
    background: rgba(255, 255, 255, 0.9);
  }

  .message-display {
    background: linear-gradient(135deg, #fff, #f8f9ff);
    padding: 2.5rem;
    border-radius: 1.5rem;
    white-space: pre-wrap;
    line-height: 1.7;
    font-size: 1rem;
    color: #444;
    border: 2px solid rgba(102, 126, 234, 0.1);
    box-shadow: inset 0 4px 12px rgba(102, 126, 234, 0.05);
    animation: messageReveal 1s ease-out;
    position: relative;
  }

  .message-display::before {
    content: '"';
    position: absolute;
    top: 1rem;
    left: 1.5rem;
    font-size: 3rem;
    color: rgba(102, 126, 234, 0.3);
    font-family: 'Dancing Script', cursive;
  }

  .message-display::after {
    content: '"';
    position: absolute;
    bottom: 1rem;
    right: 1.5rem;
    font-size: 3rem;
    color: rgba(102, 126, 234, 0.3);
    font-family: 'Dancing Script', cursive;
  }

  .confess-image {
    width: 100%;
    max-width: 300px;
    margin: 2rem auto 0;
    border-radius: 1.5rem;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    animation: imageReveal 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: block;
  }

  .typing-indicator {
    display: inline-block;
    animation: typing 1.5s steps(3, end) infinite;
  }

  /* Loading animation */
  .loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 2rem;
    z-index: 100;
  }

  .loading-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(102, 126, 234, 0.2);
    border-top: 4px solid #667eea;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  /* Animations */
  @keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-20px) rotate(5deg); }
    66% { transform: translateY(-10px) rotate(-5deg); }
  }

  @keyframes morphShape {
    0%, 100% { transform: scale(1) rotate(0deg); border-radius: 50%; }
    25% { transform: scale(1.1) rotate(90deg); border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
    50% { transform: scale(0.9) rotate(180deg); border-radius: 70% 30% 30% 70% / 70% 70% 30% 30%; }
    75% { transform: scale(1.05) rotate(270deg); border-radius: 40% 60% 60% 40% / 60% 40% 40% 60%; }
  }

  @keyframes containerEntry {
    0% {
      opacity: 0;
      transform: translateY(50px) scale(0.9);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes titleGlow {
    0% { text-shadow: 0 0 10px rgba(102, 126, 234, 0.3); }
    100% { text-shadow: 0 0 20px rgba(102, 126, 234, 0.6), 0 0 30px rgba(118, 75, 162, 0.4); }
  }

  @keyframes floatingHearts {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-10px); }
  }

  @keyframes resultEntry {
    0% {
      opacity: 0;
      transform: translateX(-30px);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes decryptEntry {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes messageReveal {
    0% {
      opacity: 0;
      transform: scale(0.95);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes imageReveal {
    0% {
      opacity: 0;
      transform: translateY(30px) scale(0.9);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
  }

  @keyframes typing {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .container {
      width: 95%;
      padding: 2rem 1.5rem;
    }
    
    .main-title {
      font-size: 2rem;
    }
    
    .bg-shape {
      display: none;
    }
  }

  /* Hide elements initially */
  .result-section,
  .decrypt-section,
  .confess-image,
  .reaction-section,
  .memory-section,
  .final-section {
    display: none;
  }

  /* New sections styling */
  .reaction-section {
    margin-top: 2rem;
    text-align: center;
    animation: reactionEntry 0.8s ease-out;
    background: linear-gradient(135deg, #fff8f0, #fff0f8);
    padding: 2rem;
    border-radius: 1.5rem;
    border: 2px solid rgba(255, 182, 193, 0.3);
  }

  .reaction-title {
    font-family: 'Dancing Script', cursive;
    font-size: 1.8rem;
    color: #d63384;
    margin-bottom: 1.5rem;
    animation: pulse 2s ease-in-out infinite;
  }

  .reaction-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .reaction-btn {
    padding: 1rem;
    border: none;
    border-radius: 50%;
    width: 80px;
    height: 80px;
    font-size: 2rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    background: rgba(255, 255, 255, 0.8);
    border: 2px solid rgba(255, 182, 193, 0.3);
    margin: 0 auto;
    display: block;
  }

  .reaction-btn:hover {
    transform: scale(1.2) rotate(10deg);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  }

  .reaction-btn.selected {
    background: linear-gradient(135deg, #ff9a9e, #fecfef);
    transform: scale(1.1);
    animation: bounce 0.6s ease-out;
  }

  .memory-section {
    margin-top: 2rem;
    animation: memoryEntry 0.8s ease-out;
    background: linear-gradient(135deg, #e8f5e8, #f0f8ff);
    padding: 2rem;
    border-radius: 1.5rem;
    border: 2px solid rgba(102, 126, 234, 0.2);
  }

  .memory-title {
    font-family: 'Dancing Script', cursive;
    font-size: 1.6rem;
    color: #667eea;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .polaroid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }

  .polaroid {
    background: white;
    padding: 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    transform: rotate(-2deg);
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .polaroid:nth-child(even) {
    transform: rotate(2deg);
  }

  .polaroid:hover {
    transform: rotate(0deg) scale(1.05);
    z-index: 10;
  }

  .polaroid-img {
    width: 100%;
    height: 150px;
    background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
    border-radius: 0.25rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    color: #ccc;
  }

  .polaroid-caption {
    text-align: center;
    font-size: 0.9rem;
    color: #666;
    font-style: italic;
  }

  .music-player {
    background: rgba(255, 255, 255, 0.9);
    padding: 1.5rem;
    border-radius: 1rem;
    border: 2px solid rgba(255, 182, 193, 0.3);
    margin-top: 1.5rem;
    text-align: center;
  }

  .music-title {
    font-weight: 600;
    color: #d63384;
    margin-bottom: 1rem;
  }

  .play-button {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    background: linear-gradient(135deg, #ff9a9e, #fecfef);
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 1rem;
  }

  .play-button:hover {
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4);
  }

  .music-progress {
    width: 100%;
    height: 6px;
    background: rgba(255, 182, 193, 0.3);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #ff9a9e, #fecfef);
    width: 0%;
    transition: width 0.3s ease;
    border-radius: 3px;
  }

  .final-section {
    margin-top: 2rem;
    text-align: center;
    animation: finalEntry 1s ease-out;
    background: linear-gradient(135deg, #667eea, #764ba2);
    padding: 3rem 2rem;
    border-radius: 1.5rem;
    color: white;
    position: relative;
    overflow: hidden;
  }

  .final-section::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    animation: sparkle 4s linear infinite;
  }

  .final-title {
    font-family: 'Dancing Script', cursive;
    font-size: 2.2rem;
    margin-bottom: 1rem;
    position: relative;
    z-index: 2;
  }

  .final-message {
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 2rem;
    position: relative;
    z-index: 2;
  }

  .action-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
    position: relative;
    z-index: 2;
  }

  .action-btn {
    padding: 1rem 2rem;
    border: 2px solid white;
    border-radius: 2rem;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .action-btn:hover {
    background: white;
    color: #667eea;
    transform: translateY(-2px);
  }

  .floating-elements {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
  }

  .floating-heart {
    position: absolute;
    font-size: 1.5rem;
    color: rgba(255, 255, 255, 0.7);
    animation: floatUp 3s ease-out infinite;
  }

  /* Additional animations */
  @keyframes reactionEntry {
    0% { opacity: 0; transform: translateY(30px) scale(0.9); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
  }

  @keyframes memoryEntry {
    0% { opacity: 0; transform: translateX(-30px); }
    100% { opacity: 1; transform: translateX(0); }
  }

  @keyframes finalEntry {
    0% { opacity: 0; transform: scale(0.8); }
    100% { opacity: 1; transform: scale(1); }
  }

  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0) scale(1.1); }
    40% { transform: translateY(-10px) scale(1.1); }
    60% { transform: translateY(-5px) scale(1.1); }
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }

  @keyframes sparkle {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  @keyframes floatUp {
    0% {
      opacity: 1;
      transform: translateY(100px) translateX(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-100px) translateX(50px);
    }
  }
</style>
</head>
<body>
<!-- Animated background -->
<div class="particles"></div>
<div class="bg-shape bg-shape-1"></div>
<div class="bg-shape bg-shape-2"></div>
<div class="bg-shape bg-shape-3"></div>

<div class="container">
  <div class="header">
    <div class="floating-hearts"></div>
    <h1 class="main-title">Ada Apa yah didalam ?</h1>
    <p class="subtitle"> mungkin sesuatu yang menarik </p>
  </div>

  <div id="formSection" class="form-section">
    <div class="input-group">
      <label class="input-label" for="name">masukin nama kamu?</label>
      <input type="text" id="name" class="name-input" placeholder="disini ya masukinnya" autocomplete="off">
    </div>
    <button class="send-button" onclick="generateEncryptedConfess()">
      <span id="buttonText">Klik deh</span>
    </button>
  </div>

  <div id="result" class="result-section">
    <div class="result-content">
      <h3 class="result-title">📝 Pesan Terenkripsi</h3>
      <div id="encryptedText" class="encrypted-text"></div>
    </div>
  </div>

  <div id="decryptSection" class="decrypt-section">
    <p class="decrypt-instruction">✨ Tekan Enter untuk membuka pesan rahasia ✨</p>
    <input id="decryptField" class="decrypt-input" placeholder="Tekan Enter untuk dekripsi..." onkeydown="handleDecrypt(event)" />
  </div>

  <div id="messageDisplay" class="message-display"></div>
  <img id="confessImage" class="confess-image" src="IMG-20250804-WA0062.jpg" alt="Confess Image" />
  <p>Ini Foto Take pertama kita fotbar hahaha</p>

  <!-- Reaction Section -->
  <div id="reactionSection" class="reaction-section">
    <h3 class="reaction-title">Bagaimana perasaanmu?</h3>
    <div class="reaction-buttons">
      <button class="reaction-btn" onclick="selectReaction('😊', 'Senang')" title="Senang">😊</button>
      <button class="reaction-btn" onclick="selectReaction('😳', 'Terkejut')" title="Terkejut">😳</button>
      <button class="reaction-btn" onclick="selectReaction('🥰', 'Terharu')" title="Terharu">🥰</button>
      <button class="reaction-btn" onclick="selectReaction('😅', 'Malu')" title="Malu">😅</button>
      <button class="reaction-btn" onclick="selectReaction('🤔', 'Bingung')" title="Bingung">🤔</button>
    </div>
    <div id="reactionResult" style="font-style: italic; color: #666; min-height: 20px;"></div>
  </div>

  <!-- Memory Section -->
  <div id="memorySection" class="memory-section">
    <h3 class="memory-title">cerita aku</h3>
    <div class="polaroid-container">
      <div class="polaroid" onclick="showMemory(1)">
        <div class="polaroid-img">📚</div>
        <div class="polaroid-caption">Hari pertama kuliah</div>
      </div>
      <div class="polaroid" onclick="showMemory(2)">
        <div class="polaroid-img">🍕</div>
        <div class="polaroid-caption">Diskusi sambil makan</div>
      </div>
      <div class="polaroid" onclick="showMemory(3)">
        <div class="polaroid-img">🎭</div>
        <div class="polaroid-caption">Makrab yang seru</div>
      </div>
    </div>
    
    <div class="music-player">
      <div class="music-title">🎵 Lagu untuk kamu</div>
      <button class="play-button" onclick="toggleMusic()" id="playBtn">▶️</button>
      <div class="music-progress">
        <div class="progress-bar" id="progressBar"></div>
        <audio id="music" src="its-you.mp3"></audio>
      </div>
      <div style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">
        It's You - Ali Gatie
      </div>
    </div>
  </div>

  <!-- Final Section -->
  <div id="finalSection" class="final-section">
    <div class="floating-elements" id="floatingElements"></div>
    <h2 class="final-title">Terima kasih sudah membaca</h2>
    <p class="final-message">
      Apapun responsmu nanti, aku sudah senang bisa berbagi perasaan ini denganmu. 😊
    </p>
  </div>
</div>

<script>
  // Create floating particles
  function createParticles() {
    const particles = document.querySelector('.particles');
    for (let i = 0; i < 20; i++) {
      const particle = document.createElement('div');
      particle.classList.add('particle');
      particle.style.left = Math.random() * 100 + '%';
      particle.style.top = Math.random() * 100 + '%';
      particle.style.width = Math.random() * 6 + 2 + 'px';
      particle.style.height = particle.style.width;
      particle.style.animationDelay = Math.random() * 6 + 's';
      particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
      particles.appendChild(particle);
    }
  }

  function encrypt(text) {
    return btoa(unescape(encodeURIComponent(text)));
  }

  function decrypt(text) {
    return decodeURIComponent(escape(atob(text)));
  }

  function generateEncryptedConfess() {
    const name = document.getElementById("name").value.trim();
    const button = document.querySelector('.send-button');
    const buttonText = document.getElementById('buttonText');
    
    if (!name) {
      // Add shake animation to input
      const input = document.getElementById('name');
      input.style.animation = 'shake 0.5s ease-in-out';
      setTimeout(() => input.style.animation = '', 500);
      
      // Show error message
      const errorMsg = document.createElement('div');
      errorMsg.textContent = 'Masukkan nama dulu dong 😊';
      errorMsg.style.color = '#ff6b6b';
      errorMsg.style.fontSize = '0.9rem';
      errorMsg.style.marginTop = '0.5rem';
      errorMsg.style.animation = 'fadeIn 0.3s ease-out';
      
      const inputGroup = document.querySelector('.input-group');
      inputGroup.appendChild(errorMsg);
      
      setTimeout(() => {
        errorMsg.remove();
      }, 3000);
      
      return;
    }

    // Loading animation
    buttonText.innerHTML = '<span class="typing-indicator">Mengirim</span>';
    
    setTimeout(() => {
      const personalized = baseMessage.replaceAll("{name}", name);
      const encrypted = encrypt(personalized);
      
      // Hide form section with animation
      const formSection = document.getElementById("formSection");
      formSection.classList.add('fade-out');
      
      setTimeout(() => {
        // Show results
        document.getElementById("encryptedText").textContent = encrypted;
        document.getElementById("result").style.display = "block";
        document.getElementById("decryptSection").style.display = "block";
        document.getElementById("decryptField").focus();
      }, 600);
      
    }, 1500);
  }

  function handleDecrypt(event) {
    if (event.key === "Enter") {
      const encryptedText = document.getElementById("encryptedText").textContent;
      const decrypted = decrypt(encryptedText);
      
      // Hide decrypt section
      document.getElementById("decryptSection").style.display = "none";
      
      // Show message with typing effect
      const messageDisplay = document.getElementById("messageDisplay");
      messageDisplay.style.display = "block";
      
      // Typing effect
      let i = 0;
      const typingSpeed = 30;
      function typeMessage() {
        if (i < decrypted.length) {
          messageDisplay.textContent = decrypted.substring(0, i + 1);
          i++;
          setTimeout(typeMessage, typingSpeed);
        } else {
          // Show image after typing is complete
          setTimeout(() => {
            document.getElementById("confessImage").style.display = "block";
          }, 800);
        }
      }
      
      typeMessage();
    }
  }

  // Add shake animation CSS
  const shakeCSS = `
    @keyframes shake {
      0%, 20%, 40%, 60%, 80%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
    }
  `;
  const style = document.createElement('style');
  style.textContent = shakeCSS;
  document.head.appendChild(style);

  // Initialize particles on load
  window.addEventListener('load', createParticles);

  // Add enter key support for name input
  document.getElementById('name').addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
      generateEncryptedConfess();
    }
  });
</script>
</body>
</html>